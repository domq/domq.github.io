#+TITLE: Emacs en partant de zÃ©ro
#+SUBTITLE: https://go.epfl.ch/emacsdezero
#+DATE: 14.06.2022
#+AUTHOR: Dominique Quatravaux
#+EMAIL: dominique@quatravaux.org
#+LANGUAGE: fr
#+OPTIONS: timestamp:nil
#+OPTIONS: toc:1
#+OPTIONS: num:nil
#+MACRO: vocabulaire *ğŸ“š Vocabulaire*
#+MACRO: definitionofdone *ğŸ¯ /Definition of done/*
#+MACRO: flecheverslebas @@html:<span style="font: 3em bold; display: inline-block; color: var(--r-link-color);">Ë…</span>@@
#+MACRO: lettrine @@html:<span style="display: inline; vertical-align: 0%; font-size: 2em">$1</span>@@
#+REVEAL_ROOT: https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/
#+REVEAL_HLEVEL: 2
#+REVEAL_HEAD_PREAMBLE: <style type="text/css">
#+REVEAL_HEAD_PREAMBLE:  .reveal ul { display: inherit; }
#+REVEAL_HEAD_PREAMBLE:  section.slide-text-white { color: white; }
#+REVEAL_HEAD_PREAMBLE:  p.small { font-size: 0.6em; text-align: justify; }
#+REVEAL_HEAD_PREAMBLE:  section.slide-code-fineprint pre.src-elisp { font-size: 0.4em; }
#+REVEAL_HEAD_PREAMBLE:  code {  color: lightblue; }
#+REVEAL_HEAD_PREAMBLE: </style>
#+REVEAL_TITLE_SLIDE_BACKGROUND: https://media.mehrnews.com/d/2019/07/21/4/3185382.jpg
#+REVEAL_TITLE_SLIDE_BACKGROUND_OPACITY: 0.3

#+COMMENTÃ‡AMARCHE: (use-package ox-reveal :quelpa)
#+COMMENTÃ‡AMARCHE: 2. C-c C-e R B

* Chapitre 1 : autonomie
** Philosophie / orientation
    :PROPERTIES:
    :reveal_background: https://img.static-rmg.be/a/view/q75/w962/h503/4264804/4c49c975418611b921b55576f621e8ae-jpg.jpg
    :reveal_background_opacity: 0.4
    :html_container_class: slide-text-white
    :END:
- Ne pas s'attendre Ã  ce que Ã§a Juste Marcheâ„¢ ! #desfoisoui #desfoisnon
- Un Ã©cosystÃ¨me prolifÃ©rant â€” Pas facile de faire les bons choix
- MÃªme choisir une direction pour avancer peut faire l'objet d'un [[https://github.com/redguardtoo/mastering-emacs-in-one-year-guide][tuto]] !
  - ğŸ’ S'astreindre Ã  une {{{definitionofdone}}}
  - ConcrÃ¨tement : un jeu de tests manuel (rÃ©digÃ© et observÃ©)

** But #1 : installation
- Pour le prÃ©sent dojo : version minimale = Emacs 27 (celui d'Ubuntu Jammy), mais plus rÃ©cent â‰¡ mieux

@@html:<p class="small">@@{{{lettrine(ğŸ’¡ğŸ¥±)}}}
Si vous vous ennuyez : cliquez sur {{{flecheverslebas}}} en bas Ã  droite...
@@html:</p>@@

*** Ã€ propos de cette prÃ©sentation
    :PROPERTIES:
    :reveal_background: https://w0.peakpx.com/wallpaper/178/808/HD-wallpaper-heavenly-trumpets-statues-music-trumpet-heaven-celestial-angels.jpg
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

- Ã‰crite avec Emacs
- Un seul [[https://github.com/domq/domq.github.io/blob/main/20220614-emacs.org][fichier source]] (+ les images)
- ğŸ”‹ GrÃ¢ce Ã  [[https://orgmode.org/][ğŸ¦„ org-mode]] + [[https://github.com/hexmode/ox-reveal][ox-reveal]]

@@html:<p class="small">@@{{{lettrine(â†•ï¸)}}}
Comme dans toute prÃ©sentation [[https://revealjs.com/][reveal.js]], la flÃ¨che vers le bas {{{flecheverslebas}}} permet de naviguer vers des informations supplÃ©mentaires, que le prÃ©sentateur Â«sauteraÂ» peut-Ãªtre faute de temps.
@@html:</p>@@

*** Balises
    :PROPERTIES:
    :reveal_background: https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/BhfEpfenhofen_Ausfahrsignale_Talaufwaerts_II.JPG/1200px-BhfEpfenhofen_Ausfahrsignale_Talaufwaerts_II.JPG
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

- {{{vocabulaire}}} :: Cette annotation repÃ¨re les mots et concepts qu'utilise Emacs dans un sens bien Ã  lui (privilÃ¨ge de l'Ã¢ge...)
- {{{definitionofdone}}} :: Cette annotation suggÃ¨re un nouveau point d'attention dans votre /definition of done/ ou contrÃ´le-qualitÃ© de votre configuration Emacs. ConsidÃ©rez que vous venez de gagner un level lorsque vous la rencontrez ğŸ˜‰

** But #2 : Ã©diter un fichier
- Ouvrir un fichier
  - Ã€ la souris, via les menus
  - Au clavier
    - ğŸ’¡ Les menus montrent les raccourcis clavier !
    - Suivez le guide : [[https://www.gnu.org/software/emacs/refcards/pdf/refcard.pdf][GNU Emacs Reference Card]]
- Visualiser l'Ã©tat sauvegardÃ© ou non
  - {{{vocabulaire}}} : modeline
- Sauvegarder

** But #3 : plusieurs fichiers Ã  la fois

- {{{vocabulaire}}} : buffer
- Exercice : dÃ©couvrir comment changer de buffer
  - Ã  la souris
  - au clavier
- {{{vocabulaire}}} : minibuffer
- La complÃ©tion avec Tab dans le minibuffer
  - On peut cliquer dedans !

- Plusieurs buffers Ã  l'Ã©cran ? Pas de panique :
  - =C-x o= @@html:<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/PublicInformationSymbol_EmergencyExit.svg/563px-PublicInformationSymbol_EmergencyExit.svg.png" style="float: right; max-height: 10vh;" />@@
  - =C-g= ou =ESC ESC ESC= â†’ Ã€ apprendre par cÅ“ur

*** But secondaire #3.1 : dÃ©placements Ã  l'intÃ©rieur d'un buffer
  - Commandes de mouvement : [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-Point.html][â†’ doc officielle]]
  - Recherche littÃ©rale avant / arriÃ¨re
  - Recherche par expression rÃ©guliÃ¨re avant / arriÃ¨re

** But #4 : premiÃ¨res personnalisations

- Ã€ la souris : Options â†’ Customize Emacs â†’ Top-level Customization Group
- Au clavier : =M-x customize <RET>=
   - ğŸ’¡ =M-x= == â€œcommand paletteâ€
   - Votre touche mÃ©ta ne marche pas ? Un peu de patience... (Â§ suivant)
     - Utiliser Escape pour l'instant : =Esc x customize <RET>=

*** Un buffer n'est pas un fichier !

Dans un buffer =*Customize*=, on ne peut pas modifier le texte.

ğŸ’¡ Les buffers qui n'ont pas de fichier ont typiquement un nom qui commence et finit par =*=.

Que faire alors ?
- Help â†’ Describe â–¸ ...
  - ... Describe Buffer modes
- Au clavier : C-h â†’ ...
  - ... â†’ C-h
  - C-h m

*** Exercice : customiser =delete-selection-mode=

Validation :
1. Ouvrir un fichier dans un buffer
2. SÃ©lectionner du texte
3. Appuyer sur une lettre

RÃ©sultat attendu : la sÃ©lection *s'efface* et est remplacÃ©e par la lettre saisie.

*** Exercice : ğŸ¤« =C-g= sans la ğŸ””

*** Exercice : ğŸ¤« =C-g= sans la ğŸ””

Solution : =M-x customize-variable <RET> visible-bell=

** But #5 : persistance des personnalisations

Le fameux =.emacs.d/init.el=...

- Sauvegarder un buffer =*Customize*= ? ğŸ¤”
- Les fichiers =~/.emacs= et =~/.emacs.d/=
- {{{definitionofdone}}} :
  - Emacs redÃ©marre sans signaler d'erreurs
  - Les changements de configuration sont persistants
- Exercice : renommer =~/.emacs=  â†’ @@html:<br/>@@ =~/.emacs.d/init.el=
  - Depuis Emacs bien sÃ»r !

** But #6 : maÃ®tre des touches

@@html:<h4>... Quelles touches ?</h4>@@

1. Ouvrir votre =~/.emacs.d/init.el=
2. Rappel :
   - Help â†’ Describe â–¸ Describe buffer modes
   - =C-h m=

- {{{vocabulaire}}} : major mode, minor mode(s)
- Exercice : comment faire pour tester mes changements de =.emacs.d/init.el= sans redÃ©marrer Emacs ?
- {{{vocabulaire}}} : =eval=

*** MaÃ®tre des touches : touche Meta

RÃ©fÃ©rence : https://www.emacswiki.org/emacs/MetaKeyProblems
  - Mac: =M-x customize-group <ret> ns=
  - Linux Ubuntu : (?)

*** MaÃ®tre des touches : =C-z= â†’ undo

Notre premier fragment d'Emacs Lisp Â«fait mainÂ» :

#+BEGIN_SRC elisp
(global-set-key [(control z)] 'undo)
#+END_SRC

*** En savoir plus sur Emacs Lisp

- =C-h f= lorsque le curseur est sur une fonction Emacs Lisp pour avoir de l'aide
  - Permet de connaÃ®tre la/les touche(s) qui active(nt) cette fonction
- {{{vocabulaire}}} : fonction interactive

*** But secondaire #6.1 : cua-mode, ğŸ‘ğŸ‘ ?
    :PROPERTIES:
    :reveal_background: https://img2.freepng.fr/20180311/odq/kisspng-united-states-easter-bunny-uncle-sam-richard-nixon-oil-painting-grandfather-5aa5363eac5952.823462721520776766706.jpg
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

Ã€ vous d'essayer !

** But #7 : un mode majeur - Web-mode

1. Ouvrir un fichier PHP
2. @@html:<img src="./images/emacs-php-tout-nu.png" style="max-height: 40vh; margin: 0;"/>@@
3. â€¦ C'est pas terrible.

*** Configuration des dÃ©pÃ´ts
- =M-x package-list-packages <RET>=
  - Bien... Mais pas top !
    #+BEGIN_SRC elisp
    (add-to-list 'package-archives
      '("melpa" . "https://melpa.org/packages/"))
    #+END_SRC
  - Tiens... Ã‡a plante.
    - ğŸ’¡ La variable =package-archives= est modifiÃ©e avant d'Ãªtre dÃ©finie.
    - ğŸ› ï¸ InsÃ©rer Ã  la ligne prÃ©cÃ©dente
      #+BEGIN_SRC elisp
      (require 'package)
      #+END_SRC

*** Exercice : installer web-mode

- Rappel : depuis le buffer =*Packages*=, =C-h m= pour comprendre dans quel Ã©tat j'erre
- Quand c'est fait :  @@html:<img src="./images/emacs-php-web-mode.png" style="float: right; max-width: 40vh;" />@@
  1. ouvrir ou basculer vers un fichier PHP
  2. =M-x web-mode=
  3. â€¦ Profit!
- ... Mais Ã§a ne Â«tientÂ» pas au redÃ©marrage â˜¹ Ã€ suivre...

*** ğŸ¤¦ Pourquoi Ã§a ne Â«tientÂ» pas ?... ğŸ¤¦

Pour plusieurs raisons, le systÃ¨me de paquetages n'est pas au cÅ“ur de l'extensibilitÃ© d'Emacs
- Historique : Emacs date de 1985 (CTAN : 1992, CPAN : 1995)
- Stallmann : CathÃ©drale vs. bazaar, idÃ©alisme / control freak vs. pragmatisme

*** La solution

1. Installer [[https://jwiegley.github.io/use-package/installation/][use-package]] (cf. supra)
2.
   #+BEGIN_SRC elisp
   (package-initialize)
   (require 'use-package)

   (use-package web-mode
     :mode "\\(html?\\|php\\)$")
   #+END_SRC

*** La solution de la solution

@@html:<img src="./images/regexp-builder.gif" style="max-height: 40vh; float: right;"/>@@
@@html:<h4>@@ =M-x regexp-builder= @@html:</h4>@@
@@html:<div style="clear: both;"></div>@@

â€¦ et/ou RTFM :

- =M-x info= â†’ =g (emacs) <RET>=
- Cliquer sur =Regexps=


** But #8 : magit â€” Une premiÃ¨re â€œkiller appâ€ avec Emacs

- Installer Magit
- Configurer la combinaison de touches =C-x v b= pour qu'elle lance la commande =magit-status=

*** â€¦ Ã€ vous de jouer !
    :PROPERTIES:
    :reveal_background: https://surrey-content.surrey.ac.uk/sites/default/files/styles/hero_large/public/2019-01/exams-on-the-day.jpg
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

*** Solution

Toujours avec [[https://jwiegley.github.io/use-package/installation/][use-package]]:

(use-package magit
  :bind ([(control x) (v) (b)] . magit-status))

{{{definitionofdone}}} : pour de meilleures performances, les paquetages Â«lourdsÂ» comme Magit, ne doivent *pas* se charger au dÃ©marrage d'Emacs.
- ContrÃ´le avec =C-h v features <RET>= : cette variable ne doit pas contenir =magit=

** Je sais faire tout seul ! 1/5
    :PROPERTIES:
    :reveal_background: https://media1.popsugar-assets.com/files/thumbor/i651KmqcSTzTxBIoBQvBQitLHzo/fit-in/2048xorig/filters:format_auto-!!-:strip_icc-!!-/2021/03/18/976/n/24155406/tmp_UTsZdZ_beeeb1a5e62e84ed_GettyImages-1208799380.jpg
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

En modifiant mon =~/.emacs.d/init.el=:

- Je fais marcher les touches =Home=, =End=, =C-Home= et =C-End= (ou Ã©quivalent de mon choix sur Mac)
  - Commandes respectives : =beginning-of-line=, =end-of-line=, =beginning-of-buffer= et =end-of-buffer=
- Je dÃ©sactive les commandes clavier que je n'aime pas avec la fonction =global-unset-key=
- =(tool-bar-mode -1)= : si je n'aime pas les icÃ´nes

*** Je sais faire tout seul ! 2/5

Avec l'aide de Google, je choisis, j'installe et je configure ce qui me plaÃ®t parmi :

- les modes adaptÃ©s Ã  mes langages de programmation prÃ©fÃ©rÃ©s
- =column-number-mode= : fait apparaÃ®tre le numÃ©ro de la colonne dans la /modeline/ Ã  cÃ´tÃ© du numÃ©ro de ligne.
- =git-gutter= : les lignes modifiÃ©es d'un fichier qui est sous Git sont marquÃ©es dans la marge
- =undo-tree= : je voyage dans les lignes temporelles de mon travail d'Ã©dition

*** Je sais faire tout seul ! 3/5
    :PROPERTIES:
    :custom_id: complÃ©tion
    :END:

J'Ã©value, configure et choisis un ou des frameworks de complÃ©tion :
  - company (recommandÃ©)
  - ido
  - auto-complete
  - (Old and busted: icicles, icomplete)
- Moar completion?
  - Helm
  - yasnippet

*** Je sais faire tout seul ! 4/5

Je consacre du temps pour maÃ®triser les â€œpower featuresâ€ d'Emacs ğŸ’ª :

- =org-mode= : ma vie en texte plat
- =tramp= : j'accÃ¨de Ã  des fichiers distants en ouvrant =/ssh:remote-host:/var/www/vhosts/tototutu.php=
  - ... Et je fais marcher Magit Ã  distance ! #emacsenprod

*** Je sais faire tout seul ! 5/5
    :PROPERTIES:
    :reveal_background: https://rnli.org/-/media/rnli/images/safety/42064-yacht-sailing-view-from-onboard-boat-nathan-williams-16x9.jpg?rev=7332374b69104667a73f3429c0cf6e36&w=1500&h=844&hash=EE495B44B8DE34A21B23A0ED76BEB06D
    :reveal_background_opacity: 0.3
    :html_container_class: slide-text-white
    :END:

- Je lis une fois en entier la page d'Info (=M-x info=) d'Emacs (=g (emacs) <RET>=)
  - ğŸ’¡ =M-x widen= pour tout voir d'un seul coup (sans navigation) !
    - {{{vocabulaire}}} : narrowing
- Je me crÃ©e un compte sur l'[[https://www.emacswiki.org/][EmacsWiki]]
- Je m'abonne Ã  [[https://www.reddit.com/r/emacs/][/r/emacs]]
- Je lis [[https://github.com/emacs-tw/awesome-emacs][Awesome Emacs]] et [[https://emacsrocks.com/][Emacs Rocks]]

* Chapitre 2 : efficacitÃ©

... Ou : tout ce qu'on peut encore faire avec Emacs, sans apprendre Emacs Lisp (pour l'instant).

** But #1 : multi-fenÃªtrage

{{{vocabulaire}}} : une /frame/ est une division de la fenÃªtre d'Emacs dans laquelle s'affiche un buffer.

Exercice : que font les combinaisons de touches suivantes ?
- =C-x 2=
- =C-x 3=
- =C-x 1=
- =C-x 0=

** But #2 : Emacs comme serveur

#+BEGIN_SRC bash
cat > $HOME/bin/emacsedit <<SCRIPT
#!/bin/sh
/usr/local/Cellar/emacs-plus@28/28.1/bin/emacsclient "$@"
SCRIPT

chmod a+x $HOME/bin/emacsedit
export EDITOR=$HOME/bin/emacsedit
#+END_SRC

Tester avec =git commit=

** But #3 : framework(s) de complÃ©tion

Si [[#complÃ©tion][pas dÃ©jÃ  fait]]

** But #4 : gÃ©rer le code dans =~/.emacs.d/=

- Y crÃ©er un dÃ©pÃ´t Git (facile)
- DÃ©placer les customizations dans un fichier Ã  part (qu'on pourra choisir de =.gitignore= r) :
  #+BEGIN_SRC elisp
  (require 'custom)
  (setq custom-file (concat user-emacs-directory "emacs-custom.el"))
  (when (file-exists-p custom-file) (load-file custom-file))
  #+END_SRC

** But #5 : /registers/ (1/3)

{{{vocabulaire}}} : un â€œregister" est comme signet de navigateur gÃ©nÃ©ralisÃ©. Il a un nom en une lettre, choisie par l'utilisateur ("a" dans les exemples qui suivent).

*** But #5 : /registers/ (2/3)

On peut par exemple stocker dans le /register/ =a= :
+ le point actuel dans un buffer : =C-x r SPC a=,
+ un bloc de texte ({{{vocabulaire}}} : une Â«rÃ©gionÂ») : =C-x r x a=,
+ la configuration actuelle des /frames/ dans la fenÃªtre courante (=C-x r f a=) ou mÃªme de toutes les fenÃªtres (=C-x r w a=),
+ â€¦ Ou d'autres choses encore (=C-x r C-h=)

*** But #5 : /registers/ (3/3)

Pour rÃ©cupÃ©rer le contenu du /register/ a (par exemple) :
- =C-x r i a= pour coller ce qu'il contient (rÃ©gion ou rectangle) ;
- =C-x r i a= pour sauter vers ce qu'il pointe (position, configuration des /frames/ ou fenÃªtres)

* Chapitre 3 : maÃ®trise

** But #1 : packages-as-code

L'installation des paquetages a Ã©tÃ© faite Ã  la main et n'est donc pas as-code. Frustrations prÃ©visibles lors de la prochaine mise Ã  jour d'Emacsâ€¦

@@html:<div class="fragment">@@

â†’ Solution : apprendre et mettre en Å“uvre [[https://github.com/quelpa/quelpa][quelpa]] et [[https://github.com/quelpa/quelpa-use-package][quelpa-use-package]]

@@html:</div>@@

*** Solution de la solution
    :PROPERTIES:
    :html_container_class: slide-code-fineprint
    :END:

#+begin_src elisp
;; Nous nous appuyons sur use-package et quelpa (et quelpa-use-package).
;; âš  Sur Mac OS X, il faut d'abord installer GNU tar (`brew install
;; gnu-tar`)! Voir https://github.com/quelpa/quelpa/issues/221
(unless (package-installed-p 'quelpa)
      (with-temp-buffer
        (url-insert-file-contents
         "https://raw.githubusercontent.com/quelpa/quelpa/master/quelpa.el")
        (eval-buffer)
        (quelpa-self-upgrade)))
(setq quelpa-update-melpa-p nil)
(require 'quelpa)
(quelpa
 '(quelpa-use-package
   :fetcher git
   :url "https://github.com/quelpa/quelpa-use-package.git"))
(require 'quelpa-use-package)
#+end_src

[[*ğŸ¤« Quelpa silencieux ğŸ¤«][ğŸ‘¨â€ğŸ³ Ã€ suivre... ğŸ¤«]]

** But #2 : aller plus loin avec org-mode

org-mode pour les prÃ©sentations : [[https://github.com/hexmode/ox-reveal][ox-reveal]]

*** But #2 : aller plus loin avec org-mode

org-mode pour le /getting things done/ :

- En-tÃªtes TODO : =M-S-RET= et =C-c / t=
-
  #+BEGIN_SRC elisp
  (global-set-key [(control c) (.)] 'org-time-stamp)
  #+END_SRC

*** But #2 : aller plus loin avec org-mode

org-mode comme un outil de carnet de laboratoire :
  - org-babel : j'inclus des scripts dans mon fichier .org; je les exÃ©cute; leur rÃ©sultat est inclus dans le document org
  - hyperliens vers d'autres fichiers (comme par exemple du code source) avec =C-c C-l= :
    #+BEGIN_SRC elisp
      (global-set-key [(control c) (control l)] 'org-store-link)
    #+END_SRC

[[*âŒ¨ï¸ Supprimer l'affectation de touches C-c C-l dans plusieurs modes âŒ¨ï¸][âŒ¨ï¸ Ã€ suivre... âŒ¨ï¸]]

** But #3 : Emacs comme IDE (1/2)

â€¦ Ce n'est pas le plus simple.

- En 2023, Emacs ne peut pas espÃ©rer rÃ©gater avec IntelliJ (par exemple) sur le plan des fonctionnalitÃ©s
- â€¦ Mais il reste plus rapide, et peut donc aider les â€œpower usersâ€.

*** But #3 : Emacs comme IDE (2/2)

- Commencer par le [[https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop][REPL]] d'un langage de script :
  - =M-x R= (du paquetage =ess=)
  - =M-x run-python=
- Continuer avec [[https://www.masteringemacs.org/article/how-to-get-started-tree-sitter][treesit]] pour votre langage prÃ©fÃ©rÃ©
  - ğŸ’¡ Plus besoin de recompiler Emacs... Du moins si vous avez dÃ©jÃ  la version 29 ([[https://ubuntuhandbook.org/index.php/2023/08/gnu-emacs-29-1-ubuntu-ppa/][Ubuntu]], [[https://github.com/d12frosted/homebrew-emacs-plus][Mac OS X]])
- Pour la navigation dans la lecture du code source : [[https://www.emacswiki.org/emacs/EmacsTags][ETags]]

** But #4 : Apprendre Emacs Lisp

- Un plan de route : https://emacs.stackexchange.com/questions/47318/how-can-i-start-learning-emacs-lisp
- =M-x info <RET> (elisp) <RET>=
- Choisir un dialecte Â«moderneÂ»
  - [[https://www.gnu.org/software/emacs/manual/html_mono/cl.html][Paquetage cl]]
  - =lexical-binding: t=

** But #4 : Apprendre Emacs Lisp

Choisir des buts de difficultÃ© croissante :

- ğŸ’ª Configurer telle variable seulement pour Emacs en mode terminal (~emacs -nw~)
- ğŸ’ªğŸ’ª Supprimer l'affectation de touches =C-c C-l= dans une pluralitÃ© de modes (avec une boucle)
- ğŸ’ªğŸ’ªğŸ’ª supprimer un message perturbant avec =advice-add=

*** âŒ¨ï¸ Supprimer l'affectation de touches C-c C-l dans plusieurs modes âŒ¨ï¸

... De sorte que [[*But #2 : aller plus loin avec org-mode][=C-c C-l= d'org-mode prenne le pas]].

#+BEGIN_SRC elisp

(dolist (cons-mode-map `((cc-mode . c-mode-base-map)
                         (python-mode . python-mode-map)
                         (python . python-mode-map)
                         (sh-script . sh-mode-map)
                         (web-mode . web-mode-map)))
  (with-eval-after-load (car cons-mode-map)
    (define-key (symbol-value (cdr cons-mode-map))
      [(control c) (control l)] nil)))

#+END_SRC

#+ATTR_REVEAL: :frag t
- =(FOO . BAR)= , une autre faÃ§on d'Ã©crire =(cons FOO BAR)=
  #+ATTR_REVEAL: :frag t
  - Accesseurs : =(car)= et =(cdr)=
#+ATTR_REVEAL: :frag t
- ğŸ” =C-h C-f= sur =define-key=, =with-eval-after-load=, =symbol-value=

*** ğŸ¤« Quelpa silencieux ğŸ¤«

#+ATTR_REVEAL: :frag t
Marre des messages ~not upgrading~ ceci ou cela ?

@@html:<div class="fragment">@@

#+begin_src elisp
  (advice-add
   'quelpa-build--message
   :before-until #'(lambda (msg &rest ignore)
                   "Ignore les messages contenant Â«Not upgradingÂ»"
                     (string-match-p "Not upgrading" msg))
   '((name . quelpa-build--message--dÃ©bavardage)))
#+end_src

@@html:</div>@@

@@html:<div class="fragment">@@

ğŸ‘¨â€ğŸ³ [[https://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html][~advice-add~ ğŸ”—]], pour patcher Ã  la volÃ©e les fonctions Ã©crites par d'autres !

@@html:</div>@@
